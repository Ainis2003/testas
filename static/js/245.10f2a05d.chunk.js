"use strict";(self.webpackChunktestas=self.webpackChunktestas||[]).push([[245],{245:(e,s,n)=>{n.r(s),n.d(s,{default:()=>i});var a=n(43),r=n(216),l=n(958),t=(n(775),n(579));const o=e=>{let{draw:s,win:n,onRestart:a,onHome:r}=e;return(0,t.jsx)("div",{className:"game-end-overlay",children:(0,t.jsxs)("div",{className:"game-end-content",children:[(0,t.jsx)("p",{children:"Game over!"}),s?(0,t.jsx)("p",{children:"It's a draw!"}):n?(0,t.jsx)("p",{children:"Congratulations! You won!"}):(0,t.jsx)("p",{children:"Sorry, you lost. Better luck next time!"}),(0,t.jsx)("button",{onClick:a,children:"Play Again"}),(0,t.jsx)("button",{onClick:r,children:"Home"})]})})},i=()=>{const{gameId:e}=(0,r.g)(),[s,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[u,j]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),[v,w]=(0,a.useState)("loading"),y=(0,r.Zp)(),b=window.location.href;let k=new Array(6).fill(null).map((e=>new Array(7).fill(null)));(0,a.useEffect)((()=>{const s=(0,l.Ay)("https://flask-skeleton-eorwmlzggq-nw.a.run.app");return n(s),s.on("connect",(()=>{s.emit("join",{gameId:e})})),s.on("message",(e=>{const s=e.state;"playing_game"==s&&(c(e.board),m(e.move),h("error"in e?e.error:null)),"game_end"==s&&(c(e.board),m(e.move),j(e.winner),g(e.draw),h("error"in e?e.error:null)),w(s)})),()=>{s.disconnect()}}),[e]);const f=()=>("["+i.match(/\[([^[\]]*)\]/g).reverse().join(",")+"]").replace(/[^0-2]/g,""),N=e=>{let s=0;for(let n=0;n<e.length;n++)for(let a=0;a<e[n].length;a++){const r=f()[s];"0"===r?e[n][a]=d?"empty":"empty2":"1"===r?e[n][a]="red":"2"===r&&(e[n][a]="yellow"),s++}return(0,t.jsxs)("div",{className:"connect4-board",children:[d&&e.map(((e,s)=>(0,t.jsx)("div",{className:"row",children:e.map(((e,s)=>(0,t.jsx)("div",{className:"circle ".concat(e||"empty"),onClick:()=>C(s)},s)))},s))),!d&&e.map(((e,s)=>(0,t.jsx)("div",{className:"row",children:e.map(((e,s)=>(0,t.jsx)("div",{className:"circle ".concat(e||"empty")},s)))},s)))]})},C=n=>{(n=>{s.emit("move",{gameId:e,move:n-1})})(n+1)},_=()=>{navigator.clipboard.writeText(b)},S=()=>{navigator.clipboard.writeText(e)};let I;switch(v){case"no_room_found":I=(0,t.jsx)("div",{children:(0,t.jsx)("p",{class:"p1",children:"No room found"})});break;case"loading":I=(0,t.jsx)("div",{children:(0,t.jsx)("p",{class:"p1",children:"Loading!"})});break;case"waiting_for_one_player":I=(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"message",children:"Waiting for one more player to join..."}),(0,t.jsxs)("p",{className:"message",children:["Room ID is: ",(0,t.jsx)("b",{children:e})]}),(0,t.jsxs)("p",{className:"message",children:["Invite players with this URL: ",(0,t.jsx)("b",{children:b})," "]}),(0,t.jsx)("button",{className:"copyButton",onClick:_,children:"Copy URL"}),(0,t.jsx)("button",{className:"copyButton",onClick:S,children:"Copy Room ID"})]});break;case"playing_game":I=(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[d&&(0,t.jsx)("div",{children:(0,t.jsx)("p",{class:"p1",children:"Your turn"})}),!d&&(0,t.jsx)("div",{children:(0,t.jsx)("p",{class:"p1",children:"Opponents turn"})}),N(k)]}),(0,t.jsx)("p",{class:"error",children:p})]});break;case"game_end":I=(0,t.jsxs)("div",{children:[N(k),(0,t.jsx)(o,{draw:x,win:u,onRestart:()=>window.location.reload(),onHome:()=>y("/")})]});break;default:I=null}return(0,t.jsx)("div",{children:I})}}}]);
//# sourceMappingURL=245.10f2a05d.chunk.js.map