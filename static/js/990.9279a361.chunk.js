"use strict";(self.webpackChunkreact_flask_app=self.webpackChunkreact_flask_app||[]).push([[990],{990:(e,s,l)=>{l.r(s),l.d(s,{default:()=>i});var a=l(43),n=l(216),r=l(958),c=(l(775),l(579));const i=()=>{const{gameId:e}=(0,n.g)(),[s,l]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[t,d]=(0,a.useState)(null),[p,m]=(0,a.useState)(null),[h,u]=(0,a.useState)(!1),[j,x]=(0,a.useState)(!1),[g,v]=(0,a.useState)("loading"),w=window.location.href;let f=new Array(6).fill(null).map((e=>new Array(7).fill(null)));(0,a.useEffect)((()=>{const s=(0,r.Ay)("https://flask-skeleton-eorwmlzggq-nw.a.run.app");return l(s),s.on("connect",(()=>{s.emit("join",{gameId:e})})),s.on("message",(e=>{const s=e.state;"playing_game"==s&&(o(e.board),d(e.move),m("error"in e?e.error:null)),"game_end"==s&&(o(e.board),d(e.move),u(e.winner),x(e.draw),m("error"in e?e.error:null)),v(s)})),()=>{s.disconnect()}}),[e]);const y=()=>("["+i.match(/\[([^[\]]*)\]/g).reverse().join(",")+"]").replace(/[^0-2]/g,""),b=e=>{let s=0;for(let l=0;l<e.length;l++)for(let a=0;a<e[l].length;a++){const n=y()[s];"0"===n?e[l][a]=t?"empty":"empty2":"1"===n?e[l][a]="red":"2"===n&&(e[l][a]="yellow"),s++}return(0,c.jsxs)("div",{className:"connect4-board",children:[t&&e.map(((e,s)=>(0,c.jsx)("div",{className:"row",children:e.map(((e,s)=>(0,c.jsx)("div",{className:"circle ".concat(e||"empty"),onClick:()=>k(s)},s)))},s))),!t&&e.map(((e,s)=>(0,c.jsx)("div",{className:"row",children:e.map(((e,s)=>(0,c.jsx)("div",{className:"circle ".concat(e||"empty")},s)))},s)))]})},k=l=>{(l=>{s.emit("move",{gameId:e,move:l-1})})(l+1)},_=()=>{navigator.clipboard.writeText(w)},N=()=>{navigator.clipboard.writeText(e)};let C;switch(g){case"no_room_found":C=(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"No room found"})});break;case"loading":C=(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"Loading!"})});break;case"waiting_for_one_player":C=(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"message",children:"Waiting for one more player to join..."}),(0,c.jsxs)("p",{className:"message",children:["Room ID is: ",(0,c.jsx)("b",{children:e})]}),(0,c.jsxs)("p",{className:"message",children:["Invite players with this URL: ",(0,c.jsx)("b",{children:w})," "]}),(0,c.jsx)("button",{className:"copyButton",onClick:_,children:"Copy URL"}),(0,c.jsx)("button",{className:"copyButton",onClick:N,children:"Copy Room ID"})]});break;case"playing_game":C=(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{children:[t&&(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"Your turn"})}),!t&&(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"Opponents turn"})}),b(f)]}),(0,c.jsx)("p",{class:"error",children:p})]});break;case"game_end":C=(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{class:"p1",children:"Game over!"}),b(f),j&&(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"Draw"})}),!j&&h&&(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"You won"})}),!j&&!h&&(0,c.jsx)("div",{children:(0,c.jsx)("p",{class:"p1",children:"You lost"})}),(0,c.jsx)("p",{class:"error",children:p})]});break;default:C=null}return(0,c.jsx)("div",{children:C})}}}]);
//# sourceMappingURL=990.9279a361.chunk.js.map